Version 4
SHEET 1 2360 708
WIRE 16 -1216 -96 -1216
WIRE 208 -1216 96 -1216
WIRE 736 -1216 512 -1216
WIRE 512 -1200 512 -1216
WIRE -96 -1104 -96 -1216
WIRE 208 -1104 208 -1216
WIRE 240 -1104 208 -1104
WIRE 512 -1104 512 -1120
WIRE 512 -1104 432 -1104
WIRE 576 -1104 512 -1104
WIRE 736 -1104 736 -1216
WIRE 240 -1008 208 -1008
WIRE 512 -1008 432 -1008
WIRE -96 -928 -96 -1024
WIRE 64 -928 -96 -928
WIRE 208 -928 208 -1008
WIRE 208 -928 64 -928
WIRE 512 -928 512 -1008
WIRE 624 -928 512 -928
WIRE 736 -928 736 -1024
WIRE 736 -928 624 -928
WIRE 64 -896 64 -928
WIRE 624 -896 624 -928
WIRE 320 -768 128 -768
WIRE 64 -736 64 -768
WIRE 736 -736 736 -768
WIRE 224 -688 224 -704
WIRE 128 -672 128 -768
WIRE 192 -672 128 -672
WIRE -512 -656 -528 -656
WIRE -416 -656 -432 -656
WIRE 320 -656 320 -768
WIRE 320 -656 256 -656
WIRE 368 -656 320 -656
WIRE -176 -640 -208 -640
WIRE -64 -640 -96 -640
WIRE 64 -640 64 -672
WIRE 64 -640 -64 -640
WIRE 192 -640 64 -640
WIRE 608 -640 576 -640
WIRE 736 -640 736 -672
WIRE 736 -640 688 -640
WIRE 784 -640 736 -640
WIRE -64 -608 -64 -640
WIRE 64 -608 64 -640
WIRE 224 -608 224 -624
WIRE 736 -608 736 -640
WIRE -512 -560 -528 -560
WIRE -416 -560 -432 -560
WIRE -64 -512 -64 -528
WIRE 64 -512 64 -544
WIRE 64 -512 -64 -512
WIRE 64 -496 64 -512
WIRE 736 -496 736 -544
WIRE -512 -464 -528 -464
WIRE -416 -464 -432 -464
WIRE 736 -368 736 -400
WIRE -512 -352 -528 -352
WIRE -416 -352 -432 -352
WIRE -176 -272 -208 -272
WIRE -64 -272 -96 -272
WIRE 64 -272 -64 -272
WIRE 208 -272 64 -272
WIRE 256 -272 208 -272
WIRE 496 -272 464 -272
WIRE 608 -272 576 -272
WIRE 736 -272 736 -304
WIRE 736 -272 608 -272
WIRE 784 -272 736 -272
WIRE -512 -256 -528 -256
WIRE -416 -256 -432 -256
WIRE -64 -240 -64 -272
WIRE 64 -240 64 -272
WIRE 208 -240 208 -272
WIRE 608 -240 608 -272
WIRE 736 -240 736 -272
WIRE -64 -144 -64 -160
WIRE 64 -144 64 -176
WIRE 64 -144 -64 -144
WIRE 208 -144 208 -176
WIRE 208 -144 64 -144
WIRE 608 -144 608 -160
WIRE 736 -144 736 -176
WIRE 736 -144 608 -144
WIRE 208 -128 208 -144
WIRE 736 -128 736 -144
FLAG -208 -272 15V
FLAG 256 -272 AP1
FLAG -528 -464 0
FLAG -416 -464 12V
FLAG -528 -256 0
FLAG -416 -256 5V_ramp
FLAG 464 -272 15V
FLAG 784 -272 AP2
FLAG 736 -128 0
FLAG 736 -400 5V
FLAG -528 -656 0
FLAG -416 -656 24V
FLAG 208 -128 0
FLAG 576 -640 5V_ramp
FLAG 784 -640 AP4
FLAG 736 -496 0
FLAG 736 -768 5V
FLAG 576 -1104 AP5
FLAG 624 -896 0
FLAG 64 -896 0
FLAG -208 -640 15V
FLAG 368 -656 AP3
FLAG 64 -496 0
FLAG 64 -768 5V
FLAG -528 -560 0
FLAG -416 -560 15V
FLAG -528 -352 0
FLAG -416 -352 5V
FLAG 224 -704 5V
FLAG 224 -608 0
SYMBOL voltage -416 -464 R90
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0V 12V 0 25m 25m 0 50m)
SYMATTR InstName V3
SYMBOL voltage -416 -256 R90
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0V 5V 0 25m 25m 0 50m)
SYMATTR InstName V1
SYMBOL zener 224 -176 R180
WINDOW 0 70 42 Right 2
WINDOW 3 105 8 Right 2
SYMATTR InstName D2
SYMATTR Value DMZ8551
SYMBOL Misc\\EuropeanResistor -80 -288 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 82k
SYMBOL diode 752 -176 R180
WINDOW 0 -8 51 Right 2
WINDOW 3 -7 14 Right 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor 592 -288 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 82k
SYMBOL diode 752 -304 R180
WINDOW 0 -5 53 Right 2
WINDOW 3 -3 11 Right 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor 624 -144 R180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R3
SYMATTR Value 22k
SYMBOL voltage -416 -656 R90
WINDOW 3 24 44 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0V 24V 0 25m 25m 0 50m)
SYMATTR InstName V5
SYMBOL Misc\\EuropeanResistor -48 -144 R180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R4
SYMATTR Value 22k
SYMBOL diode 752 -544 R180
WINDOW 0 -8 51 Right 2
WINDOW 3 -7 14 Right 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor 704 -656 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL diode 752 -672 R180
WINDOW 0 -5 53 Right 2
WINDOW 3 -3 11 Right 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL voltage -96 -1120 R0
WINDOW 3 -285 121 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0V 5V 0 10u 10u 25m 50m)
SYMATTR InstName V6
SYMBOL Misc\\EuropeanResistor 0 -1200 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 496 -1216 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL voltage 736 -1120 R0
WINDOW 3 25 89 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 5V
SYMATTR InstName V7
SYMBOL Optos\\PC817D 336 -1056 R0
SYMATTR InstName U1
SYMBOL cap 48 -240 R0
WINDOW 0 -23 9 Left 2
WINDOW 3 -43 54 Left 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL schottky 80 -544 R180
WINDOW 0 -8 51 Right 2
WINDOW 3 -7 14 Right 2
SYMATTR InstName D6
SYMATTR Value BAT54
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor -192 -624 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 8.2k
SYMBOL schottky 80 -672 R180
WINDOW 0 -5 53 Right 2
WINDOW 3 -3 11 Right 2
SYMATTR InstName D7
SYMATTR Value BAT54
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor -80 -624 R0
SYMATTR InstName R9
SYMATTR Value 2.2k
SYMBOL voltage -416 -560 R90
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0V 15V 0 25m 25m 0 50m)
SYMATTR InstName V4
SYMBOL Opamps\\UniversalOpamp2 224 -656 R0
SYMATTR InstName U2
SYMBOL voltage -416 -352 R90
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 5V
SYMATTR InstName V2
TEXT -200 -48 Left 2 !.tran 0 200m 0 100m startup
TEXT -200 -16 Left 2 !.model DMZ8551 D(Is=0.6n Rs=.5 Cjo=150p nbv=5 bv=5.1 Ibv=1m Vpk=5.1 mfg=OnSemi type=Zener)
