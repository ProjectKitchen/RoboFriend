* C:\Users\mzahedi\Documents\Git\RoboFriend\simulation\vin-ver-3\vin.asc
S1 0 0 0 N015 DPST
R7 Vload N013 1k
D1 N013 0 D
M1 N015 N017 N018 N018 IRF3717
D2 N018 N015 1N4148
D3 N015 0 1N4148
XX2 0 N017 N018 pot params: R=10k Val=72.5
R6 0 N015 1k
V1 N004 0 PULSE(0 12V 1s 1ms 1ms 2s 3s 5)
M2 0 N014 N018 N018 IPB009N03L
R2 0 N014 12k
D4 N018 N014 DMZ8510
C1 0 N014 15n V=50V
R5 Vload ADC 100k
R8 ADC 0 27k
C2 ADC 0 100n
D9 0 ADC DMZ8551
D5 N018 0 1N4148
V4 SW 0 PULSE(0V 5V 2s 1m 1m 6s 8s 1)
R10 N003 N008 0.01
R11 N003 N005 1k
R12 N008 N006 1k
R13 N005 0 33k
R14 N006 N007 33k
V7 OC 0 PULSE(0V 5V 2s 1m 1m 6s 8s 1)
R15 N008 P001 1k
D6 P001 0 D
XU1 N005 N006 12V 0 N007 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XU2 N011 N007 12V 0 N009 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XX1 5V N011 0 pot params: R=10k Val=35
R17 N002 OC 1k
D7 N003 12V 1N4148
R9 12V N001 1k
M3 N003 N001 12V 12V FDS6576
Q1 N001 N002 0 0 2N4124
R16 N002 0 10k
R18 N008 0 1.18
M5 Vload \SW 0 0 FDS6576
R4 N016 SW 1k
R19 0 \SW 1k
Q2 \SW N016 0 0 2N4124
R20 N016 0 10k
D8 Vload 0 1N4148
V3 5V 0 5V
V2 0 0 12V
V5 N012 0 5v
R1 N012 0 1k
V6 12V 0 12V
Q3 OC_INT N010 0 0 2N4124
R3 5V P002 330
R21 N010 N009 1k
D10 P002 OC_INT D
R22 N010 0 10k

* block symbol definitions
.subckt pot 1 2 3
R1 1 2 {Ra}
R2 2 3 {Rb}
.param Ra = R * (Val / 100)
.param Rb = R * (1 - (Val / 100))
.ends pot

.model D D
.lib C:\Users\mzahedi\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Users\mzahedi\Documents\LTspiceXVII\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\mzahedi\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 0 15s 0 100m
.model DPST SW(Vt=10)
.model BTN SW(Vt=3)
.model DMZ8551 D(Is=0.6n Rs=.5 Cjo=150p nbv=5 bv=5.1 Ibv=1m Vpk=5.1 type=Zener)
.model DMZ8510 D(Is=0.6n Rs=.5 Cjo=150p nbv=5 bv=10 Ibv=1m Vpk=10 type=Zener)
* Overcurrent Protection\nShunt: 0,1 V / 10 A = 0,01 Ohm, P = 10² A * 0,01 Ohm = 1 W\nDifferential Amp: Ua = (U+ - U-) * R14 / R12 = 3.3 V\nPoti: Ua = 3.25 V
* over-current simuli: change the value of R18 to < 1.2 Ohm  for (12 V / 1.2 Ohm = 10A)
* Relay
* Switch/Button
* Reverse\nPolarity\nProtection
* Vbat/Vload optic signal
* Vbat/Vload measurement
* Deep Discharge Protection
* R18 simulates the load which itself is connected to the Boost-Converter
* Monitor & AudioAmp 12 V
.lib UniversalOpamps2.sub
.backanno
.end
