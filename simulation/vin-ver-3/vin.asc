Version 4
SHEET 1 2292 1148
WIRE 256 -896 256 -944
WIRE 256 -896 112 -896
WIRE 112 -864 112 -896
WIRE -656 -848 -656 -880
WIRE 256 -800 256 -896
WIRE 336 -800 256 -800
WIRE 256 -768 256 -800
WIRE 112 -752 112 -784
WIRE 208 -752 112 -752
WIRE 336 -752 336 -800
WIRE -656 -736 -656 -768
WIRE 1104 -736 1104 -752
WIRE 112 -704 112 -752
WIRE -464 -672 -464 -704
WIRE -352 -672 -352 -704
WIRE -80 -656 -96 -656
WIRE 16 -656 0 -656
WIRE 48 -656 16 -656
WIRE 256 -640 256 -672
WIRE 336 -640 336 -688
WIRE 336 -640 256 -640
WIRE 16 -624 16 -656
WIRE -1072 -608 -1072 -784
WIRE -464 -560 -464 -592
WIRE -352 -560 -352 -592
WIRE 256 -560 256 -640
WIRE 320 -560 256 -560
WIRE 464 -560 400 -560
WIRE 544 -560 496 -560
WIRE 672 -560 624 -560
WIRE 1104 -560 1104 -592
WIRE 1184 -560 1104 -560
WIRE 16 -528 16 -544
WIRE 112 -528 112 -608
WIRE 112 -528 16 -528
WIRE 256 -528 256 -560
WIRE -784 -512 -784 -528
WIRE -704 -512 -704 -528
WIRE 112 -480 112 -528
WIRE 560 -464 560 -496
WIRE 1104 -464 1104 -560
WIRE 496 -448 496 -560
WIRE 496 -448 432 -448
WIRE 528 -448 496 -448
WIRE 784 -448 784 -464
WIRE -1072 -432 -1072 -528
WIRE 672 -432 672 -560
WIRE 672 -432 592 -432
WIRE 752 -432 672 -432
WIRE -784 -416 -784 -432
WIRE -704 -416 -704 -432
WIRE 256 -416 256 -448
WIRE 256 -416 112 -416
WIRE 320 -416 256 -416
WIRE 432 -416 432 -448
WIRE 432 -416 400 -416
WIRE 464 -416 464 -560
WIRE 528 -416 464 -416
WIRE 864 -416 864 -464
WIRE 864 -416 816 -416
WIRE 912 -416 864 -416
WIRE 1008 -416 992 -416
WIRE 1040 -416 1008 -416
WIRE 112 -400 112 -416
WIRE 752 -400 720 -400
WIRE 1008 -384 1008 -416
WIRE 560 -368 560 -400
WIRE 784 -368 784 -384
WIRE 256 -352 256 -416
WIRE 464 -352 464 -416
WIRE 720 -304 720 -400
WIRE 720 -304 704 -304
WIRE 1008 -288 1008 -304
WIRE 1104 -288 1104 -368
WIRE 1104 -288 1008 -288
WIRE 112 -240 112 -256
WIRE 256 -240 256 -272
WIRE 464 -240 464 -272
WIRE 672 -240 672 -272
WIRE 1104 -240 1104 -288
WIRE 624 -80 -720 -80
WIRE -1232 -48 -1456 -48
WIRE -1168 -48 -1232 -48
WIRE -1040 -48 -1104 -48
WIRE 1824 -16 1792 -16
WIRE 1936 -16 1904 -16
WIRE 2080 -16 2000 -16
WIRE -1456 0 -1456 -48
WIRE -1232 16 -1232 -48
WIRE -1232 16 -1296 16
WIRE -1200 16 -1232 16
WIRE -1184 16 -1200 16
WIRE -1056 16 -1088 16
WIRE -1040 16 -1040 -48
WIRE -1040 16 -1056 16
WIRE -720 16 -720 -80
WIRE -384 16 -720 16
WIRE -240 16 -384 16
WIRE -96 16 -240 16
WIRE 48 16 -96 16
WIRE 192 16 48 16
WIRE 336 16 192 16
WIRE 624 16 624 -80
WIRE 624 16 384 16
WIRE 800 16 704 16
WIRE 928 16 800 16
WIRE -384 48 -384 16
WIRE -240 48 -240 16
WIRE 192 48 192 16
WIRE 800 48 800 16
WIRE 48 64 48 16
WIRE 384 64 384 16
WIRE 928 64 928 16
WIRE -1168 80 -1168 64
WIRE 336 80 336 16
WIRE 704 80 704 16
WIRE 704 80 672 80
WIRE -1456 112 -1456 80
WIRE -1408 112 -1456 112
WIRE 704 128 672 128
WIRE 1984 144 1792 144
WIRE -1456 160 -1456 112
WIRE -384 176 -384 128
WIRE -240 176 -240 112
WIRE -240 176 -384 176
WIRE 48 176 48 128
WIRE 192 176 192 128
WIRE 192 176 48 176
WIRE 336 176 336 128
WIRE 336 176 192 176
WIRE 384 176 384 144
WIRE 512 176 384 176
WIRE 624 176 624 16
WIRE 624 176 512 176
WIRE 704 176 704 128
WIRE 800 176 800 128
WIRE 800 176 704 176
WIRE 928 176 928 144
WIRE 928 176 800 176
WIRE 1728 176 1728 144
WIRE -1648 208 -1664 208
WIRE -1552 208 -1568 208
WIRE -1520 208 -1552 208
WIRE 48 208 48 176
WIRE 928 208 928 176
WIRE -240 224 -240 176
WIRE 192 224 192 176
WIRE 1888 224 1888 192
WIRE -1552 240 -1552 208
WIRE -96 240 -96 16
WIRE 1792 240 1792 144
WIRE 1856 240 1792 240
WIRE 1984 256 1984 144
WIRE 1984 256 1920 256
WIRE 2048 256 1984 256
WIRE 1440 272 1408 272
WIRE 1568 272 1520 272
WIRE 1728 272 1728 240
WIRE 1728 272 1568 272
WIRE 1856 272 1728 272
WIRE -384 288 -384 176
WIRE 0 288 -64 288
WIRE 1568 304 1568 272
WIRE 1728 304 1728 272
WIRE 1888 320 1888 288
WIRE -1552 336 -1552 320
WIRE -1456 336 -1456 256
WIRE -1456 336 -1552 336
WIRE -720 336 -720 16
WIRE -512 336 -720 336
WIRE -464 336 -512 336
WIRE -320 336 -368 336
WIRE -240 336 -240 288
WIRE -240 336 -320 336
WIRE -96 336 -96 320
WIRE -96 336 -240 336
WIRE 48 336 48 304
WIRE 48 336 -96 336
WIRE 192 336 192 288
WIRE 192 336 48 336
WIRE -1456 368 -1456 336
WIRE -720 368 -720 336
WIRE -512 416 -512 336
WIRE -448 416 -512 416
WIRE -320 416 -320 336
WIRE -320 416 -384 416
WIRE 1568 416 1568 384
WIRE 1728 416 1728 368
WIRE 1728 416 1568 416
WIRE 1728 448 1728 416
FLAG 2080 -16 0
FLAG -1200 16 Vbat
FLAG -1056 16 Vload
FLAG 1792 -16 Vload
FLAG 1408 272 Vload
FLAG 1728 448 0
FLAG 2048 256 ADC
FLAG -704 -416 0
FLAG -704 -528 SW
FLAG 464 -240 0
FLAG 560 -368 0
FLAG 256 -240 0
FLAG -784 -416 0
FLAG -784 -528 OC
FLAG 256 -944 12V
FLAG 112 -240 0
FLAG 560 -496 5V
FLAG 784 -464 5V
FLAG 784 -368 0
FLAG 672 -240 0
FLAG 672 -352 5V
FLAG 1184 -560 OC_INT
FLAG 112 -480 0
FLAG -96 -656 OC
FLAG -1072 -432 0
FLAG -1168 80 \SW
FLAG -1456 368 0
FLAG -1664 208 SW
FLAG -1408 112 \SW
FLAG -464 -560 0
FLAG -464 -704 5V
FLAG -352 -560 0
FLAG -352 -704 Vbat
FLAG -720 368 0
FLAG 512 176 Vbat
FLAG 928 208 0
FLAG -656 -736 0
FLAG -656 -880 12V
FLAG 1104 -752 5V
FLAG 1104 -240 0
FLAG 864 -464 \OC_INT
FLAG 1728 144 5V
FLAG 1888 320 0
FLAG 1888 192 5V
SYMBOL sw 384 160 M180
SYMATTR InstName S1
SYMATTR Value DPST
SYMBOL Misc\\EuropeanResistor 1808 0 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL LED 1936 0 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL nmos 0 208 R0
SYMATTR InstName M1
SYMATTR Value IRF3717
SYMBOL diode 208 288 R180
WINDOW 0 -44 31 Left 2
WINDOW 3 -87 -2 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMATTR Description Schottky diode
SYMATTR Type schottky
SYMBOL diode 64 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL pot -112 224 R0
SYMATTR InstName X2
SYMATTR SpiceLine R=10k Val=72.5
SYMBOL Misc\\EuropeanResistor 176 32 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage -1072 -624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -249 278 Left 2
SYMATTR Value PULSE(0 12V 1s 1ms 1ms 2s 3s 5)
SYMATTR InstName V1
SYMBOL nmos -464 288 M90
WINDOW 0 -18 50 VLeft 2
WINDOW 3 72 121 VLeft 2
SYMATTR InstName M2
SYMATTR Value IPB009N03L
SYMBOL Misc\\EuropeanResistor -400 32 R0
SYMATTR InstName R2
SYMATTR Value 12k
SYMBOL zener -224 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -50 0 Left 2
SYMATTR InstName D4
SYMATTR Value DMZ8510
SYMBOL cap -256 48 R0
SYMATTR InstName C1
SYMATTR Value 15n
SYMATTR SpiceLine V=50V
SYMBOL Misc\\EuropeanResistor 1424 288 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 8.2k
SYMBOL Misc\\EuropeanResistor 1552 288 R0
SYMATTR InstName R8
SYMATTR Value 2.2k
SYMBOL diode -384 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMATTR Description Schottky diode
SYMATTR Type schottky
SYMBOL voltage -704 -528 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -8 218 Left 2
SYMATTR Value PULSE(0V 5V 2s 1m 1m 6s 8s 1)
SYMATTR InstName V4
SYMBOL Misc\\EuropeanResistor 240 -544 R0
SYMATTR InstName R10
SYMATTR Value 0.01
SYMBOL Misc\\EuropeanResistor 304 -544 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 304 -400 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 448 -368 R0
SYMATTR InstName R13
SYMATTR Value 33k
SYMBOL Misc\\EuropeanResistor 528 -544 R270
WINDOW 0 29 26 VTop 2
WINDOW 3 57 95 VBottom 2
SYMATTR InstName R14
SYMATTR Value 33k
SYMBOL voltage -784 -528 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 171 Left 2
SYMATTR Value PULSE(0V 5V 2s 1m 1m 6s 8s 1)
SYMATTR InstName V7
SYMBOL Misc\\EuropeanResistor 96 -416 R0
WINDOW 0 -47 42 Left 2
WINDOW 3 -32 70 Left 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL LED 96 -320 R0
WINDOW 0 -41 24 Left 2
WINDOW 3 -43 50 Left 2
SYMATTR InstName D6
SYMBOL Opamps\\UniversalOpamp2 560 -432 R0
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 784 -416 R0
SYMATTR InstName U2
SYMBOL pot 656 -368 R0
WINDOW 0 -34 77 Left 2
SYMATTR InstName X1
SYMATTR SpiceLine R=10k Val=35
SYMBOL Misc\\EuropeanResistor 16 -672 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL diode 352 -688 R180
WINDOW 0 -22 61 Left 2
WINDOW 3 -75 2 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMATTR Description Schottky diode
SYMATTR Type schottky
SYMBOL Misc\\EuropeanResistor 96 -880 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL pmos 208 -672 M180
WINDOW 0 -33 49 Left 2
WINDOW 3 75 -3 VRight 2
SYMATTR InstName M3
SYMATTR Value FDS6576
SYMBOL npn 48 -704 R0
SYMATTR InstName Q1
SYMATTR Value 2N4124
SYMBOL Misc\\EuropeanResistor 0 -640 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 240 -368 R0
SYMATTR InstName R18
SYMATTR Value 1.18
SYMBOL pmos -1088 64 M270
WINDOW 0 -33 27 Left 2
WINDOW 3 -60 -10 Left 2
SYMATTR InstName M5
SYMATTR Value FDS6576
SYMBOL Misc\\EuropeanResistor -1552 192 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor -1472 -16 R0
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL npn -1520 160 R0
SYMATTR InstName Q2
SYMATTR Value 2N4124
SYMBOL Misc\\EuropeanResistor -1568 224 R0
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL diode -1104 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMATTR Description Schottky diode
SYMATTR Type schottky
SYMBOL voltage -464 -688 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 23 101 Left 2
SYMATTR Value 5V
SYMATTR InstName V3
SYMBOL voltage -352 -688 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 17 100 Left 2
SYMATTR Value 12V
SYMATTR InstName V2
SYMBOL voltage 928 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 22 97 Left 2
SYMATTR Value 5v
SYMATTR InstName V5
SYMBOL Misc\\EuropeanResistor 784 32 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage -656 -864 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 23 101 Left 2
SYMATTR Value 12V
SYMATTR InstName V6
SYMBOL npn 1040 -464 R0
SYMATTR InstName Q3
SYMATTR Value 2N4124
SYMBOL Misc\\EuropeanResistor 1088 -752 R0
SYMATTR InstName R3
SYMATTR Value 330
SYMBOL Misc\\EuropeanResistor 1008 -432 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL LED 1088 -656 R0
WINDOW 0 -41 24 Left 2
WINDOW 3 -43 50 Left 2
SYMATTR InstName D10
SYMBOL Misc\\EuropeanResistor 992 -400 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL schottky 1744 368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1744 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D11
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Opamps\\UniversalOpamp2 1888 256 R0
SYMATTR InstName U3
TEXT -1120 -296 Left 2 !.tran 0 15s 0 100m
TEXT -1120 -264 Left 2 !.model DPST SW(Vt=10)\n.model BTN SW(Vt=3)\n.model DMZ8551 D(Is=0.6n Rs=.5 Cjo=150p nbv=5 bv=5.1 Ibv=1m Vpk=5.1 type=Zener)\n.model DMZ8510 D(Is=0.6n Rs=.5 Cjo=150p nbv=5 bv=10 Ibv=1m Vpk=10 type=Zener)
TEXT 480 -976 Left 2 ;Overcurrent Protection\nShunt: 0,1 V / 10 A = 0,01 Ohm, P = 10² A * 0,01 Ohm = 1 W\nDifferential Amp: Ua = (U+ - U-) * R14 / R12 = 3.3 V\nPoti: Ua = 3.25 V
TEXT 96 -192 Left 2 ;over-current simuli: change the value of R18 to < 1.2 Ohm  for (12 V / 1.2 Ohm = 10A)
TEXT 288 -24 Left 2 ;Relay
TEXT -1192 -120 Left 2 ;Switch/Button
TEXT -344 -120 Left 2 ;Reverse\nPolarity\nProtection
TEXT 1680 -104 Left 2 ;Vbat/Vload optic signal
TEXT 1344 136 Left 2 ;Vbat/Vload measurement
TEXT -112 -120 Left 2 ;Deep Discharge Protection
TEXT 480 -864 Left 2 ;R18 simulates the load which itself is connected to the Boost-Converter
TEXT -96 416 Left 2 ;Monitor & AudioAmp 12 V
LINE Normal -176 -144 -400 -144 1
LINE Normal -176 480 -176 -144 1
LINE Normal -544 480 -176 480 1
LINE Normal -560 480 -544 480 1
LINE Normal -560 144 -560 480 1
LINE Normal -416 144 -560 144 1
LINE Normal -416 -144 -416 144 1
LINE Normal -400 -144 -416 -144 1
RECTANGLE Normal 2128 496 1312 80 1
RECTANGLE Normal 1296 -160 -144 -1040 1
RECTANGLE Normal 160 224 480 -48 1
RECTANGLE Normal -1008 128 -1264 -144 1
RECTANGLE Normal 2128 48 1648 -144 1
RECTANGLE Normal 1024 480 -144 -144 1
