Version 4
SHEET 1 2516 1148
WIRE 1152 -48 960 -48
WIRE 1152 -32 1152 -48
WIRE 1968 -16 1840 -16
WIRE -48 0 -144 0
WIRE 128 0 -48 0
WIRE 288 0 128 0
WIRE 480 0 288 0
WIRE 576 0 480 0
WIRE 672 0 576 0
WIRE 1456 16 1424 16
WIRE 1568 16 1536 16
WIRE -144 32 -144 0
WIRE -48 32 -48 0
WIRE 128 32 128 0
WIRE 288 32 288 0
WIRE 480 32 480 0
WIRE 576 32 576 0
WIRE 672 32 672 0
WIRE 1792 32 1792 -16
WIRE 1152 64 1152 48
WIRE 1904 64 1904 48
WIRE 1840 80 1840 -16
WIRE 1872 80 1840 80
WIRE 1968 96 1968 -16
WIRE 1968 96 1936 96
WIRE 2000 96 1968 96
WIRE 480 112 480 96
WIRE 576 112 576 80
WIRE 576 112 480 112
WIRE 672 112 672 80
WIRE 768 112 672 112
WIRE 864 112 768 112
WIRE 960 112 864 112
WIRE 1376 112 960 112
WIRE 1424 112 1424 16
WIRE 1424 112 1376 112
WIRE 1456 112 1424 112
WIRE 1568 112 1568 16
WIRE 1568 112 1536 112
WIRE 1680 112 1568 112
WIRE 1792 112 1792 96
WIRE 1792 112 1680 112
WIRE 1872 112 1792 112
WIRE 672 128 672 112
WIRE 1568 128 1568 112
WIRE 1680 128 1680 112
WIRE 1792 128 1792 112
WIRE -48 144 -48 112
WIRE 48 144 -48 144
WIRE 320 144 208 144
WIRE 416 144 400 144
WIRE 576 144 576 112
WIRE -144 160 -144 112
WIRE -48 160 -48 144
WIRE 48 160 48 144
WIRE 1904 160 1904 128
WIRE 288 192 288 96
WIRE 1376 192 1376 112
WIRE 1376 192 1280 192
WIRE 256 208 80 208
WIRE 1280 208 1280 192
WIRE 416 224 416 144
WIRE 416 224 320 224
WIRE 528 224 416 224
WIRE 768 224 768 112
WIRE 864 224 864 112
WIRE 960 224 960 112
WIRE 1568 224 1568 208
WIRE 1680 224 1680 208
WIRE 1680 224 1568 224
WIRE 1792 224 1792 192
WIRE 1792 224 1680 224
WIRE -48 240 -48 224
WIRE 128 240 128 112
WIRE 208 240 208 144
WIRE 208 240 128 240
WIRE 256 240 208 240
WIRE 672 240 672 208
WIRE 1792 240 1792 224
WIRE 48 256 48 240
WIRE 128 256 128 240
WIRE 288 272 288 256
WIRE 576 272 576 240
WIRE 1376 288 1376 192
WIRE 1472 288 1376 288
WIRE 1376 304 1376 288
WIRE 1280 320 1280 288
WIRE 1328 320 1280 320
WIRE 1472 320 1472 288
WIRE 48 352 48 336
WIRE 128 352 128 336
WIRE 208 352 208 336
WIRE 576 352 576 336
WIRE 672 352 672 304
WIRE 1280 352 1280 320
WIRE 1088 400 1072 400
WIRE 1184 400 1168 400
WIRE 1216 400 1184 400
WIRE 1376 416 1376 400
WIRE 1472 416 1472 384
WIRE 1472 416 1376 416
WIRE 1184 432 1184 400
WIRE 768 464 768 304
WIRE 864 464 864 304
WIRE 960 464 960 304
WIRE 128 480 128 464
WIRE 224 480 224 464
WIRE 1184 528 1184 512
WIRE 1280 528 1280 448
WIRE 1280 528 1184 528
WIRE 1376 528 1376 416
WIRE 1424 528 1376 528
WIRE 1552 528 1504 528
WIRE 1648 528 1600 528
WIRE 1760 528 1728 528
WIRE 1376 544 1376 528
WIRE 128 576 128 560
WIRE 224 576 224 560
WIRE 1280 576 1280 528
WIRE 1840 608 1840 592
WIRE 1680 624 1680 608
WIRE 1808 624 1792 624
WIRE 1376 640 1376 624
WIRE 1376 640 1280 640
WIRE 1424 640 1376 640
WIRE 1600 640 1600 528
WIRE 1600 640 1504 640
WIRE 1648 640 1600 640
WIRE 1904 640 1872 640
WIRE 1280 656 1280 640
WIRE 1760 656 1760 528
WIRE 1760 656 1712 656
WIRE 1808 656 1760 656
WIRE 1552 672 1552 528
WIRE 1648 672 1552 672
WIRE 1376 688 1376 640
WIRE 1840 688 1840 672
WIRE 1552 704 1552 672
WIRE 1680 704 1680 688
WIRE 1792 768 1792 624
WIRE 1280 816 1280 800
WIRE 1376 816 1376 768
WIRE 1552 816 1552 784
WIRE 1760 816 1760 800
FLAG 672 352 0
FLAG 2000 96 ADC
FLAG 1552 816 0
FLAG 1680 704 0
FLAG 1376 816 0
FLAG 224 576 0
FLAG 224 464 OC
FLAG 1280 816 0
FLAG 1680 608 5V
FLAG 1840 592 5V
FLAG 1840 688 0
FLAG 1760 816 0
FLAG 1760 720 5V
FLAG 1904 640 OC_INT
FLAG 1280 576 0
FLAG 1072 400 OC
FLAG 128 576 0
FLAG 128 464 5V
FLAG 1904 160 0
FLAG 1904 48 5V
FLAG 1792 -16 5V
FLAG 1792 240 0
FLAG 288 272 0
FLAG 48 352 0
FLAG -48 240 0
FLAG -144 160 0
FLAG 128 352 0
FLAG 208 352 0
FLAG 576 352 0
FLAG 1152 64 0
FLAG 1152 -48 +12V
FLAG 768 464 0
FLAG 864 464 0
FLAG 960 464 0
SYMBOL Misc\\EuropeanResistor 656 112 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL LED 656 240 R0
SYMATTR InstName D1
SYMBOL Misc\\EuropeanResistor 1440 128 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 18k
SYMBOL Misc\\EuropeanResistor 1552 112 R0
SYMATTR InstName R8
SYMATTR Value 3k
SYMBOL schottky 1808 192 R180
WINDOW 0 -33 54 Left 2
WINDOW 3 -78 10 Left 2
SYMATTR InstName D9
SYMATTR Value BAT54
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor 1360 528 R0
SYMATTR InstName R10
SYMATTR Value 0.01
SYMBOL Misc\\EuropeanResistor 1408 544 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 1408 656 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 1536 688 R0
SYMATTR InstName R13
SYMATTR Value 33k
SYMBOL Misc\\EuropeanResistor 1632 544 R270
WINDOW 0 29 26 VTop 2
WINDOW 3 57 95 VBottom 2
SYMATTR InstName R14
SYMATTR Value 33k
SYMBOL voltage 224 464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -17 159 Left 2
SYMATTR Value PULSE(5V 0 0 1u 1u 600ms 2s)
SYMATTR InstName V7
SYMBOL Misc\\EuropeanResistor 1264 640 R0
WINDOW 0 -47 42 Left 2
WINDOW 3 -32 70 Left 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL Opamps\\UniversalOpamp2 1680 656 R0
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 1840 640 R0
SYMATTR InstName U2
SYMBOL pot 1744 704 R0
WINDOW 0 -34 77 Left 2
SYMATTR InstName X1
SYMATTR SpiceLine R=10k Val=34
SYMBOL Misc\\EuropeanResistor 1184 384 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL diode 1488 384 R180
WINDOW 0 -22 61 Left 2
WINDOW 3 -75 2 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMATTR Description Schottky diode
SYMATTR Type schottky
SYMBOL Misc\\EuropeanResistor 1264 192 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL pmos 1328 400 M180
WINDOW 0 -33 49 Left 2
WINDOW 3 75 -3 VRight 2
SYMATTR InstName M3
SYMATTR Value FDS6576
SYMBOL npn 1216 352 R0
SYMATTR InstName Q1
SYMATTR Value 2N4124
SYMBOL Misc\\EuropeanResistor 1168 416 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL voltage 128 464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -16 158 Left 2
SYMATTR Value 5V
SYMATTR InstName V3
SYMBOL Opamps\\UniversalOpamp2 1904 96 R0
SYMATTR InstName U3
SYMBOL schottky 1808 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 26 Left 2
SYMATTR InstName D10
SYMATTR Value BAT54
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL voltage -144 16 R0
WINDOW 3 -4 -57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(10V 15V 0 2s 2s 0 4s)
SYMATTR InstName V1
SYMBOL zener -32 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84B6V2L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Misc\\EuropeanResistor -64 16 R0
SYMATTR InstName R1
SYMATTR Value 4.7k
SYMBOL Misc\\EuropeanResistor 32 240 R0
SYMATTR InstName R2
SYMATTR Value 47k
SYMBOL Misc\\EuropeanResistor 112 16 R0
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL Misc\\EuropeanResistor 112 240 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL pot 32 144 R0
SYMATTR InstName X2
SYMATTR SpiceLine R=100k Val=62.5
SYMBOL relais 608 64 R0
WINDOW 39 -165 -103 Left 2
SYMATTR SpiceLine ION=7m IOFF=2m LL=63m RR=510
SYMATTR InstName X4
SYMBOL polcap 192 272 R0
SYMATTR InstName C2
SYMATTR Value 33µ
SYMATTR SpiceLine V=16V
SYMBOL Opamps\\UniversalOpamp2 288 224 R0
SYMATTR InstName U5
SYMBOL nmos 528 144 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL diode 272 32 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 496 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL voltage 1152 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 32 90 Left 2
WINDOW 0 34 16 Left 2
SYMATTR Value 12V
SYMATTR InstName V4
SYMBOL Misc\\EuropeanResistor 1440 32 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 12k
SYMBOL Misc\\EuropeanResistor 1664 112 R0
SYMATTR InstName R18
SYMATTR Value 39k
SYMBOL LED 1264 736 R0
WINDOW 0 -45 21 Left 2
WINDOW 3 -45 48 Left 2
SYMATTR InstName D5
SYMBOL Misc\\EuropeanResistor 1360 672 R0
SYMATTR InstName R19
SYMATTR Value 1.2
SYMBOL Misc\\EuropeanResistor 752 208 R0
SYMATTR InstName R20
SYMATTR Value 12
SYMBOL Misc\\EuropeanResistor 848 208 R0
SYMATTR InstName R23
SYMATTR Value 24
SYMBOL Misc\\EuropeanResistor 944 208 R0
SYMATTR InstName R24
SYMATTR Value 24
SYMBOL Misc\\EuropeanResistor 416 128 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1Meg
SYMBOL diode 560 272 R0
SYMATTR InstName D6
SYMATTR Value 1N4148
TEXT 440 -72 Left 2 !.tran 8s
TEXT 1608 312 Left 2 ;Overcurrent Protection\nShunt: 0,1 V / 10 A = 0,01 Ohm\nShunt: P = 10² A * 0,01 Ohm = 1 W\nDifferential Amp: \nUa = (U+ - U-) * R14 / R12 = 3.3 V\nPoti: Ua = 3.25 V
TEXT 232 -96 Left 2 ;Reverse\nPolarity\nProtection
TEXT 280 360 Left 2 ;Deep Discharge Protection
TEXT 728 512 Left 2 ;Monitor
TEXT 840 512 Left 2 ;Audio\nAmp
TEXT 1344 864 Left 2 ;Boost\nModules
TEXT 1584 -56 Left 2 ;Vbat\nMeasurement
TEXT 944 512 Left 2 ;Buck\nModule
TEXT 1856 672 Left 2 ;TL331
TEXT 1640 744 Left 2 ;INA193
TEXT 1920 128 Left 2 ;MCP6001
TEXT 304 256 Left 2 ;TL331
